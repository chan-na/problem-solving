# 그래프

## 그래프란

- 그래프는 여러 컴퓨터 과학 문제에서 두루 사용되는 구조이다
- 그래프(G=(V, E))의 기본적인 형태는 정점의 집합(V)와 간선의 집합(E, V에 속한 정점들 사이의 연결 관계에 대한 정보를 저장)

## 저장 방법 1 - 인접 행렬

```C++
// 정점의 개수 V가 주어짐

int adjMat[V][V];   // 조금 더 크게 잡아놓는것도 좋다
```

- 그래프 관련 문제를 풀 때 정점의 개수 V를 알 수 있으므로, 2차원 정적 배열 int adjMat[V][v]를 이용해서 그래프를 저장할 수 있다.
- 정점 i와 j사이에 간선이 없으면 adjMat[i][j]에 0을 저장하고, 간선이 있다면 보통 1을 저장한다. 가중치가 있는 그래프에서는 가중치를 저장한다.
- 인접 행렬 방법은 **작은 크기의 dense gragh**에 속한 두 정점 사이의 연결관계를 자주확인해야할 때 쓴다.
- 큰 크기의 sparse gragh에서는 인접 행렬 방법을 쓰지 않는것이 좋다. 많은 공간 O(V^2)을 차지할 뿐더러, 2차원 배열에 빈칸이 많아서 메모리 낭비가 심하기 때문이다.
- 대회 환경에서 보통 **V가 1000 정도보다 더 크다면 인접행렬을 사용하는것이 불가능**하다.
- 인접 행렬의 또다른 단점은 어떤 정점 v와 이웃한 모든 정점을 나열할 때, O(V)만큼의 시간이 걸린다는 것이다.
- 인접 행렬은 다중 그래프(multigragh)를 저장하는 데는 활용할 수 없다.

## 저장 방법 2 - 인접 리스트

```C++
typedef pair<int, int> ii;
typedef vector<ii> vii;

vector<vii> adjList;
```

- 각 원소가 int pair인 벡터를 저장하는 vector를 사용해서 인접 리스트 형태로 그래프를 저장할 수 있다.
- int pair에는 이웃 정점의 인덱스와, 가중치를 저장한다. 가중치가 없는 그래프면 int pair가 아닌 int만을 사용해도 상관없다.
- 인접 리스트의 공간 복잡도는 O(V + E)이다. 만약 그래프에 양방향 간선이 E개 있다면 인접 리스트에는 2E개의 간선 정보 페어만 저장되기 때문이다.
- 어떤 정점 v의 이웃정점의 개수가 k이면, 이웃한 모든 정점을 나열할 때 O(k)의 시간이 걸린다. 이는 대부분의 그래프 알고리즘에서 가장 자주 사용되는 작업의 하나이며, 따라서 **그래프를 구현할 때 인접 리스트를 우선적으로 고려해보는 것이 바람직**하다.
- 인접 리스트는 다중 그래프를 저장할 때도 쓸 수 있다.

## 저장 방법 3 - 간선 리스트

```C++
typedef pair<int, int> ii;

vector<pair<int, ii>> edgeList;
```

- 보통 각 원소가 세 쌍으로 표현된 배열 형태로 저장한다.
- 간선 리스트는 간선 E개의 목록을 (보통 정렬된 형태로) 저장한다. 방향 그래프의 경우 양방향 간선을 각 방향별로 두 번씩 저장한다.
- 간선의 개수만큼 저장하므로, 공간 복잡도는 명백히 O(E)이다.
- 이 그래프 표현방법은 MST를 구하기 위한 크루스칼 알고리즘에서 요긴하게 쓰인다. 무방향 간선의 목록을 가중치의 오름차순으로 정렬해야 하기 때문이다.
- 하지만 각 정점에 인접한 간선을 모두 나열할 필요가 있는 여러 그래프 알고리즘의 경우라면, 그래프를 간선 리스트 형태로 저장해두는 것이 오히려 작업을 불편하게 만든다.

## 묵시적 그래프(implicit gragh)

- 어떤 종류의 그래프는 그래프를 자료 구조에 저장하거나 명시적으로 그래프를 생성하지 않아도 탐색 등의 작업을 수행할 수 있다. 이러한 그래프를 묵시적 그래프라고 한다.

### 묵시적 그래프의 예 1 - 간선을 쉽게 판별할 수 있는 경우

##### 2차원 격자형태의 지도

- 2차원 char형 배열에 지도에 해당 위치가 땅이면 '#' 장애물이면 '@'을 저장해 놓았다고 하자.
- 만약 칸이 인접(동서남북중 한방향이 붙음)해있고 서로 '#'값을 가진다면 두 칸 사이는 간선이 존재한다.

##### 체스판에서 나이트(knigt)의 이동

- 각 정점이 체스판의 각 칸이고 나이트가 이동할수 있는 칸들을 간선으로 잇는다고 해보자.
- 체스 룰에의해서, 만일 어떤 두 칸이 가로로 2칸 세로로 1칸 떨어져있거나, 혹은 세로로 1칸 가로로 2칸 떨어져 있다면 두 칸 사이에 간선이 존재한다.

### 묵시적 그래프의 예 2 - 간선을 어떤 규칙에 따라 판별할 수 있는 경우

##### 규칙 : 정점의 인덱스를 더해서 소수이면 간선이 존재함

- 어떤 그래프의 정점이 N개(각각은 1 .. N)있고, 만일 i + j 가 소수라면 두 정점 i와 j사이에 간선이 존재한다는 규칙이 있다고 하자.
- 그러면 굳이 그래프를 만들지 않아도 규칙에 의해서 간단히 간선을 판별할 수 있다.
